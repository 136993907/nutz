<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
<title>1.r.61 发行注记</title><link href="../zdoc.css" rel="stylesheet" type="text/css"/>
</head>
<body><a name="top"></a>
<div class="zdoc_header">1.r.61 发行注记</div>
<div class="zdoc_author"><em>By:</em><b>wendal</b><a href="mailto:wendal1985@gmail.com">&lt;wendal1985@gmail.com&gt;</a></div>
<div class="zdoc_body">
<ul class="zdoc_index_table">
<li>
<div><span class="num">1</span><a href="#1r61_岗地苹果_发行注记(20170417)">1.r.61 岗地苹果 发行注记(20170417)</a></div>
</li>
<li>
<div><span class="num">2</span><a href="#主要变化:">主要变化:</a></div>
</li>
<li>
<div><span class="num">3</span><a href="#部分新功能介绍">部分新功能介绍</a></div>
</li>
<li>
<div><span class="num">4</span><a href="#文档更新">文档更新</a></div>
</li>
<li>
<div><span class="num">5</span><a href="#详细列表:">详细列表:</a></div>
</li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="1r61_岗地苹果_发行注记(20170417)"></a>1.r.61 <b>岗地苹果</b> 发行注记(20170417)</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>恩,你比之前快了.</p>
<p>启动加速, 指Scans类的初始化过程,当项目里面有上百个jar的时候,老版本需3s,现在仅需50ms</p>
<p>运行加速, 指FastClass已经完全重写并默认启用,而且对使用者是透明的</p>
<p>乐观锁,由<a href="https://github.com/crskyp">crskyp</a>提供</p>
<p>来,体验一下飞一般的速度</p>
<p>在此感谢社区,QQ群里以各种方式贡献的童鞋,^_^,未能一一记录,深表歉意</p>
<p>JDK6的用户请使用 1.r.61.r2</p>
<div class="hr"><b></b></div>
<h1><a name="主要变化:"></a>主要变化:</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<ul type="disc">
<li>update: 重写了Scans类的初始化过程,性能提升50+倍</li>
<li>update: 内置的asm升级到5.2.0,这次无删减了.</li>
<li>update: 重写FastClass实现,非常接近原生的性能了.</li>
<li>update: Mirror与FastClass的透明化融合</li>
<li>update: 关于 org.nutz.resource.Scans 覆盖问题 <a href="https://github.com/nutzam/nutz/issues/1227">issue_1227</a></li>
<li>update: servlet api更新到3.1.0, 运行时继续兼容servlet api 2.5+</li>
<li>fix: ViewProcessor的ViewModel参数判断问题 <a href="https://github.com/nutzam/nutz/issues/1209">issue_1209</a></li>
<li>fix: Http.getStatusText根本不工作</li>
<li>fix: Module类没能继承父类的@At方法<a href="https://github.com/nutzam/nutz/issues/1212">issue_1212</a></li>
<li>fix: FilePostSender与golang服务器的兼容性问题 <a href="https://github.com/nutzam/nutz/issues/1214">issue_1214</a></li>
<li>fix: AbstractContext的putAll方法有bug <a href="https://github.com/nutzam/nutz/issues/1221">issue_1221</a></li>
<li>fix: Strings.isEmail()规则不完整 <a href="https://github.com/nutzam/nutz/issues/1215">issue_1215</a></li>
<li>fix: Lang.each方法与JDK8闭包的兼容性问题 <a href="https://github.com/nutzam/nutz/issues/1228">issue_1228</a></li>
<li>fix: 注入一个类型不合的对象到另外一个对象的属性时,报错信息让人迷惑 <a href="https://github.com/nutzam/nutz/issues/1232">issue_1232</a></li>
<li>fix: 腾讯云Mysql数据库被识别为DB2 <a href="https://github.com/nutzam/nutz/issues/1210">issue_1210</a></li>
<li>add: 乐观锁(dao.updateWithVersion)</li>
<li>add: 增加 Http的Request HEAD方法的支持 <a href="https://github.com/nutzam/nutz/issues/1206">issue_1206</a></li>
<li>add: Http.upload上传文件，支持同一个参数含有多个文件 <a href="https://github.com/nutzam/nutz/issues/1220">issue_1220</a></li>
<li>add: 提供不需要@column的机制和驼峰式命名的全局开关 <a href="https://github.com/nutzam/nutz/issues/1217">issue_1217</a></li>
<li>add: JsonFormat支持支持粒度更小的空值控制,例如setNullStringAsEmtry <a href="https://github.com/nutzam/nutz/issues/1225">issue_1225</a></li>
<li>add: JsonFormat支持时区设置 <a href="https://github.com/nutzam/nutz/issues/1208">issue_1208</a></li>
<li>add: Cnd支持JDK序列化 <a href="https://github.com/nutzam/nutz/issues/1207">issue_1207</a></li>
<li>add: 新的Daos.queryCount方法</li>
<li>add: Lang添加sha2系列快捷方法</li>
<li>add: SimpleDataSource支持国产的博阳数据库</li>
<li>add: Http.get支持参数map</li>
<li>add: Tmpl类支持更多语法</li>
<li>remove: LazyNutDao</li>
<li>remove: httpdns 有更多更专业的库提供这个功能</li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="部分新功能介绍"></a>部分新功能介绍</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>原Daos.queryCount(String)已废弃,替换为Daos.queryCount(Sql),该方法能适应更多场景.</p>
<pre>Sql sql = Sqls.create(...);
<span class="zdoc_code_cmt">// 原本
</span>long count = Daos.queryCount(sql.toString());
<span class="zdoc_code_cmt">// 现在
</span>long count = Daos.queryCount(sql);
</pre>
<p>乐观锁及其底层方法</p>
<pre><span class="zdoc_code_cmt">// 通过@Column(version=true)指定版本控制属性
</span>dao.updateWithVersion(pet, null);
<span class="zdoc_code_cmt">// 通过编码方式指定版本控制属性
</span>dao.updateAndIncrIfMatch(pet, null, "version");
</pre>
<p>fetchByJoin/queryByJoin 一条SQL取出@One关联对象</p>
<pre>platoon = dao.fetchByJoin(Platoon.class, null, "wendal");
</pre>
<div class="hr"><b></b></div>
<h1><a name="文档更新"></a>文档更新</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<ul type="disc">
<li>nutzwx 的入门文档</li>
<li>nutzmongo 的入门文档</li>
<li>各种小修改,继续整理,准备全面转markdown</li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="详细列表:"></a>详细列表:</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<ul type="disc">
<li><a href="https://github.com/nutzam/nutz/issues?q=is%3Aissue+is%3Aclosed+milestone%3A1.r.61">issue@github</a></li>
</ul>
<p>欢迎访问<a href="https://nutzam.com">官网</a> 及 <a href="https://nutz.cn">Nutz社区</a>,以获取更多信息</p>
<p><a href="https://nutz.cn">Nutz社区</a>已经累计了近4000个帖子, 20000+条回复,平均回复时间少于10分钟哦,白天基本上秒回!</p>
</div>
<div class="zdoc_footer"><em>By:</em><b>wendal</b><a href="mailto:wendal1985@gmail.com">&lt;wendal1985@gmail.com&gt;</a></div>
</body>
</html>