<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head><meta HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"/>
<title>1.r.62 发行注记</title><link href="../zdoc.css" rel="stylesheet" type="text/css"/>
</head>
<body><a name="top"></a>
<div class="zdoc_header">1.r.62 发行注记</div>
<div class="zdoc_author"><em>By:</em><b>wendal</b><a href="mailto:wendal1985@gmail.com">&lt;wendal1985@gmail.com&gt;</a></div>
<div class="zdoc_body">
<ul class="zdoc_index_table">
<li>
<div><span class="num">1</span><a href="#1r62_黄皮_发行注记(20170718)">1.r.62 黄皮 发行注记(20170718)</a></div>
</li>
<li>
<div><span class="num">2</span><a href="#主要变化:">主要变化:</a></div>
</li>
<li>
<div><span class="num">3</span><a href="#部分新功能介绍">部分新功能介绍</a></div>
</li>
<li>
<div><span class="num">4</span><a href="#文档更新">文档更新</a></div>
</li>
<li>
<div><span class="num">5</span><a href="#详细列表:">详细列表:</a></div>
</li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="1r62_黄皮_发行注记(20170718)"></a>1.r.62 <b>黄皮</b> 发行注记(20170718)</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>黄皮,有点酸有点甜,但不是初恋的味道, 俺这种广州土著就很喜欢吃.去年7月北京之行,给同事带去的一箱黄皮和荔枝,结果,荔枝一边倒的好评, 黄皮是毁誉参半. </p>
<p>新功能新特性也是这样,有人更喜欢它的甜,也有人更在意它的酸.</p>
<p>这个版本, 新特性主要是"@IocBean/@Inject的扩展", 不到100行的代码, 对ioc的扩展性的提升蛮大的.</p>
<p>兼容性方面, 应该100%兼容1.r.61.r2, 一如既往的放心升级吧,现在还新增了"版本升级"的文档,收集升级中可能遇到的问题.</p>
<p>我们迎来了新的提交者<a href="https://github.com/qinerg">qinerg</a>,他给nutz提交了几个修改,并在nutzmore添加了event和undertow等插件</p>
<p>感谢elkan1788,hzl7652,tanqimin,l4dfire,qinerg,SkyMonkya,flakycov,jiyuefeng在github上提交的issue/pr,及论坛上新增的几百个帖子的作者,还有QQ群里的基友们, 各位都在以各种的方式推动着nutz的前进.</p>
<div class="hr"><b></b></div>
<h1><a name="主要变化:"></a>主要变化:</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<ul type="disc">
<li>add: <a href="https://github.com/nutzam/nutz/issues/1280">支持把@IocBean标注在方法上,作为工厂方法</a> by wendal</li>
<li>add: <a href="https://github.com/nutzam/nutz/issues/1267">MVC的Param中增加对自定义时间格式的解析</a> by <a href="https://github.com/elkan1788">elkan1788</a></li>
<li>add: <a href="https://github.com/nutzam/nutz/issues/1149">Daos.migration要支持Oracle和SqlServer的索引新增 </a> by <a href="https://github.com/hzl7652">hzl7652</a> , <a href="https://github.com/tanqimin">tanqimin</a>,wendal</li>
<li>add: <a href="https://github.com/nutzam/nutz/pull/1256">dao支持nst</a> by <a href="https://github.com/l4dfire">l4dfire</a></li>
<li>add: <a href="https://github.com/nutzam/nutz/issues/1268">Images支持图片水平、垂直翻转</a> by pangwu86</li>
<li>add: <a href="https://github.com/nutzam/nutz/issues/1262">Images工具类加上水印</a> by pangwu86</li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1250">PropertiesProxy.print方法不work</a> by wendal</li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1261">json转换08会报错</a> by <a href="https://github.com/qinerg">qinerg</a></li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1261">ChainPasing解析</a> by <a href="https://github.com/qinerg">qinerg</a></li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1271">使用Http工具类获取网页时出错</a> by <a href="https://github.com/qinerg">qinerg</a></li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1276">通过map进行插入操作时,设置主键和自增应该顺序无关</a> by wendal</li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1277">MVC @Param 对象属性默认值df无效</a> by <a href="https://github.com/SkyMonkya">SkyMonkya</a></li>
<li>fix: <a href="https://github.com/nutzam/nutz/issues/1283">HttpTest.test_weibo_post is flaky</a> by <a href="https://github.com/flakycov">flakycov</a></li>
<li>change: <a href="https://github.com/nutzam/nutz/pull/1249">重写H2下获得表索引方法</a> by <a href="https://github.com/jiyuefeng">jiyuefeng</a></li>
<li>change: <a href="https://github.com/nutzam/nutz/issues/1282">Dao初始化时引用的FilePool改为懒汉式</a> by <a href="https://github.com/qinerg">qinerg</a></li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="部分新功能介绍"></a>部分新功能介绍</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>新增@IocBean实例工厂方法, 可以代替ioc js, 集成第三方类的时候更方便了, 详情查阅文档 <a href="ioc/ioc_factory.man">工厂方法</a></p>
<pre>@IocBean <span class="zdoc_code_cmt">// 首先,它自己必须加@IocBean, 可以使用@IocBean/@Inject的全部功能.
</span>public class MyBeanFactory {

@IocBean
public PropertiesProxy getConf() {
    if ("product".equals(System.getProperty("nutz.runmode"))) {
        return new PropertiesProxy("/etc/nutz/custom");
    } else {
    	return new PropertiesProxy("custom/");
    }
}

<span class="zdoc_code_cmt">// 生成一个名为dataSource的bean. 命名规则是: IocBean(name=XXX) &gt; 方法名去掉get/build后首字母小写.
</span>@IocBean
public SimpleDataSource getDataSource(@Inject("refer:conf")PropertiesProxy conf) {
    SimpleDataSource ds = new SimpleDataSource();
    ds.setJdbcUrl(conf.get("db.url", "jdbc:h2:mem:nutztest"));
    return ds;
}

@IocBean 
public Dao buildDao(DataSource dataSource) { <span class="zdoc_code_cmt">// 带参数, 默认是按类型注入
</span>    return new NutDao(dataSource);
}
</pre>
<div class="hr"><b></b></div>
<h1><a name="文档更新"></a>文档更新</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<p>基于Wikipedia的要求, nutz的文档已全部应用 <a href="http://zh.wikipedia.org/wiki/Wikipedia:CC-BY-SA-3.0协议文本">知识共享 署名-相同方式共享 3.0协议</a> 及<a href="http://zh.wikipedia.org/wiki/Wikipedia:GNU自由文档许可证文本">GNU自由文档许可证</a>, 上述协议并不影响大家的使用,请放心.</p>
<ul type="disc">
<li>add: <a href="http://nutzam.com/core/img/overview.html">Images图片水平/垂直翻转/添加水印</a>的文档 by pangwu86</li>
<li>add: <a href="http://nutzam.com/core/basic/version_upgrade.html">版本升级</a>的章节</li>
<li>add: <a href="http://nutzam.com/core/ioc/ioc_factory.html">Ioc工厂方法</a>独立为一个章节,并添加@IocBean实例工厂方法的说明</li>
<li>add: <a href="http://nutzam.com/core/weixin/weixin_api.html">微信API</a></li>
<li>add: <a href="http://nutzam.com/core/weixin/weixin_login.html">微信登录</a></li>
</ul>
<div class="hr"><b></b></div>
<h1><a name="详细列表:"></a>详细列表:</h1>
<div style="float:right;"><a href="#top">Top</a></div>
<ul type="disc">
<li><a href="https://github.com/nutzam/nutz/issues?q=is%3Aissue+is%3Aclosed+milestone%3A1.r.62">issue@github</a></li>
</ul>
<p>欢迎访问<a href="https://nutzam.com">官网</a> 及 <a href="https://nutz.cn">Nutz社区</a>,以获取更多信息</p>
<p><a href="https://nutz.cn">Nutz社区</a>已经累计了5000多帖子, 20000+条回复,平均回复时间少于10分钟哦,白天基本上秒回!</p>
</div>
<div class="zdoc_footer"><em>By:</em><b>wendal</b><a href="mailto:wendal1985@gmail.com">&lt;wendal1985@gmail.com&gt;</a></div>
</body>
</html>